{% extends "core/base.html" %}

{% block title %}Purchase Order{% endblock title %}

{% block content %}

<h1 class="text-3xl font-semibold mb-4 text-center">{{ title }}</h1>
<!-- upload.html -->

<div class="flex items-center justify-center">
    
    <form method="post" enctype="multipart/form-data" class="w-3/5 p-4 bg-white rounded shadow-md">
        {% csrf_token %}

        <!-- Choose File Field with medium width -->
        <div class="mb-4">
            <label for="fileInput" class="block text-gray-700 text-sm font-bold mb-2">Choose File:</label>
            <input type="file" name="file" id="fileInput" class="block w-full text-sm text-black-500
            file:mr-4 file:py-2 file:px-2 file:rounded-md
            file:border-0 file:text-sm file:font-semibold
            file:bg-blue-200 file:text-black-700
            hover:file:bg-blue-100" accept=".zip, .pdf" multiple required>
 </div>

        <!-- Your custom HTML for other form elements, if any -->

        <!-- Upload File Button -->
        <button type="submit" name='upload_button' class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded">
            Start
        </button>

        <a href="/po_report" target="_blank" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 mx-2 rounded">
            Download Report
        </a>



    </form>
</div>

<script>
    function startProcess() {
        // Implement any client-side logic if needed before submitting the form
        document.querySelector('form').submit();
    }
    document.getElementById('fileInput').addEventListener('change', function() {
        var files = this.files;
        var maxFiles = 200; // Set your desired maximum number of files
        var maxSize = 500 * 1024 * 1024; // Set your desired maximum total size in bytes (100 MB in this example)
    
        if (files.length > maxFiles) {
          alert('You can only upload a maximum of ' + maxFiles + ' files.');
          this.value = ''; // Clear the file input to reset selection
          return;
        }
    
        var totalSize = 0;
        for (var i = 0; i < files.length; i++) {
          totalSize += files[i].size;
        }
    
        if (totalSize > maxSize) {
          alert('The total size of selected files exceeds the limit of 500 MB.');
          this.value = ''; // Clear the file input to reset selection
        }
      });
</script>

{% endblock content %}